<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dissara - Gift Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/cart.js"></script>
    <script src="assets/js/wishlist.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Cormorant+Garamond:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/luxury.css?v=2" />

    <!-- Add Didot font -->
    <link href="https://fonts.googleapis.com/css2?family=Didot:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
          --gold: #d4af37;
          --navy: #1a2238;
          --offwhite: #f8f6f3;
          --gray: #e5e7eb;
          --dark: #111827;
          --bg: #1a2238;
          --ink: #fff;
        }
        body { background: var(--bg); color: var(--ink); }

        .navbar-font {
          font-family: 'Cormorant Garamond', serif;
          letter-spacing: 0.02em;
        }
        .didot {
          font-family: 'Didot', 'Didot LT STD', 'Didot Italic', serif;
          letter-spacing: 0.01em;
          color: var(--ink);
        }
        .gold-border {
          border-color: var(--gold);
        }
        .gold-text { color: var(--gold); }
        .gold-bg { background: var(--gold); color:#0a0d10; }
        .navy-bg { background: transparent; color: var(--ink); }

        .navy-text { color: var(--ink); }
        .on-light { color: #1a2238; }

        .card-hover {
          transition: box-shadow 0.3s, transform 0.3s;
        }
        .card-hover:hover {
          box-shadow: 0 8px 32px 0 rgba(212,175,55,0.18);
          transform: translateY(-6px) scale(1.03);
          border-color: var(--gold);
        }
        
        /* Ensure buttons are clickable */
        button {
          pointer-events: auto !important;
          cursor: pointer !important;
        }
        .buy-now-btn {
          pointer-events: auto !important;
          cursor: pointer !important;
          z-index: 10;
          border: none;
          transition: all 0.3s ease;
          position: relative;
        }
        .buy-now-btn:hover {
          filter: brightness(1.1);
          transform: translateY(-2px);
        }
        .buy-now-btn:active {
          transform: translateY(0);
        }
        .buy-now-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        .dropdown {
          background: #fae6b1;
          border-radius: 1rem;
          box-shadow: 0 2px 8px 0 rgba(212,175,55,0.07);
        }
        .dropdown select {
          background: transparent;
          border: none;
          font-size: 1.1rem;
          font-family: 'Didot', serif;
          color: var(--navy);
        }
        .nav-link {
          position: relative;
          transition: color 0.2s;
        }
        .nav-link:after {
          content: '';
          display: block;
          margin: 0 auto;
          width: 0;
          height: 2px;
          background: var(--gold);
          transition: width 0.3s;
        }
        .nav-link:hover:after, .nav-link.active:after {
          width: 80%;
        }
        .nav-link.active {
          color: var(--gold);
        }

        .gold-border {
          border-color: var(--gold);
        }
        .navy-bg { background: transparent; color: var(--ink); }

        /* Force dark text inside light panels */
        .light .navy-text, .light .didot { color:#1a2238 !important; }
        .light .text-muted { color:#374151 !important; }
        
        /* Ensure text in textarea is visible */
        textarea {
          color: #1a2238 !important;
        }
        /* Scrollbar styles for modal */
        .modal-scroll {
          max-height: 75vh;
          overflow-y: auto;
          scrollbar-width: thin;
          scrollbar-color: #c0a97a #f5f5f5;
          padding-right: 8px;
        }
        .modal-scroll::-webkit-scrollbar {
          width: 6px;
        }
        .modal-scroll::-webkit-scrollbar-track {
          background: #f5f5f5;
          border-radius: 3px;
        }
        .modal-scroll::-webkit-scrollbar-thumb {
          background-color: #c0a97a;
          border-radius: 3px;
        }

        /* Cart Dropdown Styles */
        .cart-dropdown {
          position: fixed;
          top: 60px;
          right: 20px;
          width: 380px;
          max-height: 500px;
          background: linear-gradient(145deg, rgba(16,23,32,0.98), rgba(11,15,20,0.99));
          border: 1px solid rgba(212,175,55,0.4);
          border-radius: 16px;
          box-shadow: 0 20px 40px rgba(0,0,0,0.4), 0 0 20px rgba(212,175,55,0.1);
          z-index: 10000;
          overflow: hidden;
          backdrop-filter: blur(10px);
        }
        
        .cart-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 20px;
          border-bottom: 1px solid rgba(212,175,55,0.3);
          background: rgba(212,175,55,0.05);
        }
        
        .cart-header h3 {
          margin: 0;
          color: var(--ink);
          font-size: 1.2rem;
          font-weight: 700;
        }
        
        .close-cart {
          background: none;
          border: none;
          color: var(--ink);
          font-size: 24px;
          cursor: pointer;
          width: 32px;
          height: 32px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
        }
        
        .close-cart:hover {
          background: rgba(212,175,55,0.2);
          color: var(--gold);
        }
        
        .cart-items {
          max-height: 300px;
          overflow-y: auto;
          padding: 10px;
        }
        
        .cart-item {
          display: flex;
          gap: 15px;
          padding: 15px;
          margin-bottom: 10px;
          background: rgba(212,175,55,0.03);
          border-radius: 12px;
          border: 1px solid rgba(212,175,55,0.1);
          transition: all 0.2s ease;
        }
        
        .cart-item:hover {
          background: rgba(212,175,55,0.08);
          border-color: rgba(212,175,55,0.3);
        }
        
        .cart-item img {
          width: 60px;
          height: 60px;
          object-fit: cover;
          border-radius: 8px;
          border: 1px solid rgba(212,175,55,0.2);
        }
        
        .cart-item-details {
          flex: 1;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        }
        
        .cart-item-name {
          color: var(--ink);
          font-weight: 600;
          font-size: 0.9rem;
          margin-bottom: 4px;
          line-height: 1.3;
        }
        
        .cart-item-meta {
          color: var(--muted);
          font-size: 0.8rem;
          margin-bottom: 4px;
        }
        
        .cart-item-price {
          color: var(--gold);
          font-weight: 700;
          font-size: 0.9rem;
        }
        
        .cart-item-remove {
          background: rgba(255,107,107,0.1);
          border: 1px solid rgba(255,107,107,0.3);
          color: #ff6b6b;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.2s ease;
        }
        
        .cart-item-remove:hover {
          background: rgba(255,107,107,0.2);
          border-color: rgba(255,107,107,0.5);
          transform: scale(1.1);
        }
        
        .empty-cart {
          text-align: center;
          padding: 40px 20px;
          color: var(--muted);
        }
        
        .empty-cart-icon {
          font-size: 48px;
          margin-bottom: 15px;
          opacity: 0.5;
        }
        
        .cart-footer {
          padding: 20px;
          border-top: 1px solid rgba(212,175,55,0.3);
          background: rgba(212,175,55,0.05);
        }
        
        .cart-total {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 15px;
          font-size: 1.1rem;
          font-weight: 700;
        }
        
        .cart-total span:first-child {
          color: var(--ink);
        }
        
        .cart-total span:last-child {
          color: var(--gold);
          font-size: 1.3rem;
        }
        
        .checkout-btn {
          width: 100%;
          background: linear-gradient(135deg, var(--gold), #d4af37);
          color: #0a0d10;
          border: none;
          padding: 14px;
          border-radius: 12px;
          font-weight: 700;
          font-size: 0.95rem;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 4px 12px rgba(212,175,55,0.3);
        }
        
        .checkout-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(212,175,55,0.4);
        }
        
        /* Scrollbar styling */
        .cart-items::-webkit-scrollbar {
          width: 6px;
        }
        
        .cart-items::-webkit-scrollbar-track {
          background: rgba(212,175,55,0.1);
          border-radius: 3px;
        }
        
        .cart-items::-webkit-scrollbar-thumb {
          background: rgba(212,175,55,0.4);
          border-radius: 3px;
        }
        
        .cart-items::-webkit-scrollbar-thumb:hover {
          background: rgba(212,175,55,0.6);
        }
        
        /* Responsive */
        @media (max-width: 480px) {
          .cart-dropdown {
            width: calc(100vw - 40px);
            right: 20px;
            left: 20px;
          }
        }
    </style>
</head>
<body>
    <!-- Floating Navigation (unified) -->
    <header class="floating-nav">
      <div class="brand">
        <a href="index.html" aria-label="Home">
          <img src="logo.png" alt="Dissara" class="logo" />
        </a>
      </div>
      <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <nav class="navlinks" id="navlinks">
        <a href="index.html">Home</a>
        <a href="gift-store.html">Gift Store</a>
        <a href="collections.html">Collections</a>
        <a href="index.html#newarrivals">New Arrivals</a>
        <!-- <a href="index.html#shopby">Shop By</a> -->
        <a href="index.html#contact">Contact</a>
        <a href="index.html#about">About Us</a>
        <span id="authSlot"></span>
      </nav>
      <div class="nav-actions">
        <button id="wishlistIconButton" class="nav-icon-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" d="M12 21s-4.35-2.43-7.05-5.14C2.24 13.15 2 10.1 4.03 8.07a4.26 4.26 0 0 1 6.02.25L12 10.34l1.95-2.02a4.26 4.26 0 0 1 6.02-.25c2.03 2.03 1.79 5.08-.92 7.79C16.35 18.57 12 21 12 21z" />
          </svg>
          <span id="wishlistCount" class="nav-icon-badge" style="display:none;">0</span>
        </button>
        <button id="cartButton" class="nav-icon-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
          <span id="cartCount" class="nav-icon-badge" style="display:none;">0</span>
        </button>

        <!-- Cart Dropdown -->
        <div id="cartDropdown" class="cart-dropdown" style="display: none;">
          <div class="cart-header">
            <h3>Shopping Cart</h3>
            <button id="closeCart" class="close-cart">&times;</button>
          </div>
          <div class="cart-items" id="cartItems">
            <!-- Cart items will be dynamically added here -->
          </div>
          <div class="cart-footer">
            <div class="cart-total">
              <span>Total:</span>
              <span id="cartTotal">‚Çπ0</span>
            </div>
            <button id="checkoutBtn" class="checkout-btn">Proceed to Checkout</button>
          </div>
        </div>
      </div>
    </header>

    <!-- Gift Store Section -->
    <section class="py-16" style="background: radial-gradient(900px 500px at 10% 110%, rgba(212,175,55,.05), transparent 60%), var(--bg)">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- <h2 class="didot text-5xl md:text-6xl font-normal gold-text mb-12 text-center tracking-wide leading-tight">Find the best gift for your loved ones</h2> -->
        <h2 class="didot text-5xl md:text-6xl font-normal gold-text mb-12 text-center tracking-wide leading-tight" 
    style="margin-top: 40px;">
    Find the best gift for your loved ones
        </h2>

        <div class="flex flex-col md:flex-row gap-8 mb-16 justify-center items-center">
          <!-- Custom Dropdown: Occasion -->
          <div class="relative flex-1 max-w-xs mx-auto px-8 py-6 flex flex-col items-center rounded-2xl shadow-sm hover:shadow-md transition bg-[#fae6b1] min-w-[320px]">
            <label class="text-xs md:text-sm tracking-widest uppercase mb-4 font-medium text-center w-full" style="color: #1a2238;">Occasion</label>
            <div class="relative w-full flex flex-col items-center justify-center">
              <button type="button" id="occasionDropdownBtn" class="w-full flex justify-center items-center gap-2 bg-transparent border-none text-lg md:text-xl font-medium didot text-center py-2 rounded-xl focus:ring-2 focus:ring-[var(--gold)] focus:border-[var(--gold)] hover:border-[var(--gold)] transition cursor-pointer outline-none" style="color: #0a0d10;" aria-haspopup="listbox" aria-expanded="false">
                <span id="occasionSelected" class="flex-1 text-center" style="color: #0a0d10;">Birthday</span>
                <span class="text-[var(--gold)] flex items-center justify-center">
                  <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                </span>
              </button>
              <ul id="occasionDropdown" tabindex="-1" class="hidden absolute left-0 top-full w-full bg-[#1a2238] border border-[var(--gold)] rounded-xl shadow-lg z-20 py-2 mt-2 didot text-lg text-[var(--ink)] font-medium text-center">
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Birthday">Birthday</li>
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Anniversary">Anniversary</li>
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Wedding">Wedding</li>
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Graduation">Graduation</li>
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Festive">Festive</li>
              </ul>
            </div>
          </div>
          <!-- Custom Dropdown: Gift Type -->
          <div class="relative flex-1 max-w-xs mx-auto px-8 py-6 flex flex-col items-center rounded-2xl shadow-sm hover:shadow-md transition bg-[#fae6b1] min-w-[320px]">
            <label class="text-xs md:text-sm tracking-widest uppercase mb-4 font-medium text-center w-full" style="color: #1a2238;">Gift type</label>
            <div class="relative w-full flex flex-col items-center justify-center">
              <button type="button" id="giftTypeDropdownBtn" class="w-full flex justify-center items-center gap-2 bg-transparent border-none text-lg md:text-xl font-medium didot text-center py-2 rounded-xl focus:ring-2 focus:ring-[var(--gold)] focus:border-[var(--gold)] hover:border-[var(--gold)] transition cursor-pointer outline-none" style="color: #0a0d10;" aria-haspopup="listbox" aria-expanded="false">
                <span id="giftTypeSelected" class="flex-1 text-center" style="color: #0a0d10;">Rings</span>
                <span class="text-[var(--gold)] flex items-center justify-center">
                  <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                </span>
              </button>
              <ul id="giftTypeDropdown" tabindex="-1" class="hidden absolute left-0 top-full w-full bg-[#1a2238] border border-[var(--gold)] rounded-xl shadow-lg z-20 py-2 mt-2 didot text-lg text-[var(--ink)] font-medium text-center">
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Rings">Rings</li>
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Necklaces">Necklaces</li>
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Earrings">Earrings</li>
                <li class="px-6 py-2 hover:bg-[var(--gold)] hover:text-[var(--dark)] cursor-pointer rounded transition" data-value="Combos">Combos</li>
              </ul>
            </div>
          </div>
        </div>

        <h3 class="didot text-3xl md:text-4xl font-normal navy-text mb-12 text-center tracking-wide">CATEGORIES</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-10">
          <div class="product-card flex flex-col items-center bg-white rounded-2xl border border-[var(--gray)] card-hover p-8 min-h-[370px]">
            <div class="w-36 h-36 flex items-center justify-center mb-6 overflow-hidden rounded-xl bg-[#f8f6f3] border border-[var(--gray)]">
              <img src="necklace2.jpg" alt="Radiant Sunburst Necklace & Earring Set" class="object-contain max-h-32 max-w-32" />
            </div>
            <div class="didot text-lg font-medium on-light mb-3 text-center leading-snug">Radiant Sunburst Necklace & Earring Set</div>
            <button class="mt-auto w-full gold-bg font-medium py-2 rounded-lg text-base didot shadow hover:shadow-lg transition buy-now-btn" data-product-id="1">Buy now</button>
          </div>
          <div class="product-card flex flex-col items-center bg-white rounded-2xl border border-[var(--gray)] card-hover p-8 min-h-[370px]">
            <div class="w-36 h-36 flex items-center justify-center mb-6 overflow-hidden rounded-xl bg-[#f8f6f3] border border-[var(--gray)]">
              <img src="bracelet2.jpg" alt="Floral Cutout Gold Bracelet" class="object-contain max-h-32 max-w-32" />
            </div>
            <div class="didot text-lg font-medium on-light mb-3 text-center leading-snug">Floral Cutout Gold Bracelet</div>
            <button class="mt-auto w-full gold-bg font-medium py-2 rounded-lg text-base didot shadow hover:shadow-lg transition buy-now-btn" data-product-id="2">Buy now</button>
          </div>
          <div class="product-card flex flex-col items-center bg-white rounded-2xl border border-[var(--gray)] card-hover p-8 min-h-[370px]">
            <div class="w-36 h-36 flex items-center justify-center mb-6 overflow-hidden rounded-xl bg-[#f8f6f3] border border-[var(--gray)]">
              <img src="bracelet1.jpg" alt="Evil Eye Rose Gold Bracelet" class="object-contain max-h-32 max-w-32" />
            </div>
            <div class="didot text-lg font-medium on-light mb-3 text-center leading-snug">Evil Eye Rose Gold Bracelet</div>
            <button class="mt-auto w-full gold-bg font-medium py-2 rounded-lg text-base didot shadow hover:shadow-lg transition buy-now-btn" data-product-id="3">Buy now</button>
          </div>
          <div class="product-card flex flex-col items-center bg-white rounded-2xl border border-[var(--gray)] card-hover p-8 min-h-[370px]">
            <div class="w-36 h-36 flex items-center justify-center mb-6 overflow-hidden rounded-xl bg-[#f8f6f3] border border-[var(--gray)]">
              <img src="earings2.jpg" alt="Dual Pearl Gold-Toned Drop Earrings" class="object-contain max-h-32 max-w-32" />
            </div>
            <div class="didot text-lg font-medium on-light mb-3 text-center leading-snug">Dual Pearl Gold-Toned Drop Earrings</div>
            <button class="mt-auto w-full gold-bg font-medium py-2 rounded-lg text-base didot shadow hover:shadow-lg transition buy-now-btn" data-product-id="4">Buy now</button>
          </div>
        </div>

<!-- Luxury Modal for Buy Now -->
<div id="luxuryModalOverlay" class="fixed inset-0 bg-black bg-opacity-40 z-50 hidden flex items-center justify-center" style="z-index:2000">
  <div class="relative bg-[#fffdfa] rounded-3xl shadow-2xl max-w-3xl w-full mx-4 p-8 md:p-10 flex flex-col light modal-scroll" style="font-family: 'Didot', serif; min-width:380px;">
    <div class="flex items-center justify-between mb-2">
      <button id="backLuxuryModal" class="text-2xl text-[var(--navy)] hover:text-[var(--gold)] focus:outline-none flex items-center gap-1">
        <svg width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        <span class="text-base md:text-lg">Back</span>
      </button>
      <div class="flex items-center gap-4">
        <button id="shareLuxuryModal" class="text-2xl text-[var(--navy)] hover:text-[var(--gold)] focus:outline-none flex items-center" title="Share">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="20" cy="7" r="2"/>
            <circle cx="8" cy="14" r="2"/>
            <circle cx="20" cy="21" r="2"/>
            <line x1="9.7" y1="13.1" x2="18.3" y2="8.9"/>
            <line x1="9.7" y1="14.9" x2="18.3" y2="19.1"/>
          </svg>
        </button>
      </div>
    </div>
    <h2 class="text-4xl md:text-5xl font-normal navy-text mb-2 leading-tight">Gold Tone Circular<br>Charm Necklace</h2>
    <div class="text-xl navy-text mb-2">with Pave stones</div>
    <div class="inline-block px-6 py-2 rounded-full bg-[#e5d6f6] text-[#7c4d99] text-2xl font-medium mb-2">Rs.799.00</div>
    <div class="text-base text-red-600 font-semibold mb-2">Only Few items left in store!!</div>
    <div class="text-base navy-text mb-4 flex items-center gap-2 cursor-pointer" id="showDescriptionBtn">
      <span class="underline decoration-1 underline-offset-4 hover:text-[var(--gold)] transition">Item Description</span>
    </div>
    <div id="productDescription" class="hidden text-base on-light mb-4 bg-[#f8f6f3] rounded-xl p-4 border border-[var(--gold)]">This elegant gold tone circular charm necklace features sparkling pave stones, perfect for adding a touch of luxury to any outfit. Hypoallergenic, lightweight, and beautifully crafted for all occasions. <br><br>‚Ä¢ Gold-tone finish<br>‚Ä¢ Pave stone detailing<br>‚Ä¢ Adjustable chain<br>‚Ä¢ Hypoallergenic & skin safe<br>‚Ä¢ Comes in a luxury gift box</div>
    
    <!-- Customization Options -->
    <div class="mb-6 border border-[var(--gold)] rounded-xl p-4">
      <h3 class="text-lg font-medium on-light mb-3">Customization Options</h3>
      
      <!-- Add a Note Option -->
      <div class="mb-4">
        <div class="flex items-center justify-between mb-2">
          <label class="flex items-center cursor-pointer">
            <input type="checkbox" id="addNoteCheckbox" class="h-4 w-4 text-[var(--gold)] rounded border-gray-300 focus:ring-[var(--gold)]">
            <span class="ml-2 text-base on-light">Add a note with it <span class="text-[var(--gold)] font-medium">(+‚Çπ30)</span></span>
          </label>
          <span class="text-base font-medium text-[var(--gold)]">+‚Çπ30.00</span>
        </div>
        <div id="noteInputContainer" class="mt-2 hidden">
          <textarea id="noteInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent" rows="3" placeholder="Type your custom message here..."></textarea>
          <p class="text-xs text-gray-500 mt-1">Your personal message will be included with the gift.</p>
        </div>
      </div>
      
      <!-- Gift Wrap Option -->
      <div>
        <div class="flex items-center justify-between">
          <label class="flex items-center cursor-pointer">
            <input type="checkbox" id="giftWrapCheckbox" class="h-4 w-4 text-[var(--gold)] rounded border-gray-300 focus:ring-[var(--gold)]">
            <span class="ml-2 text-base on-light">Gift wrap it <span class="text-[var(--gold)] font-medium">(+‚Çπ50)</span></span>
          </label>
          <span class="text-base font-medium text-[var(--gold)]">+‚Çπ50.00</span>
        </div>
        <div id="giftWrapDetails" class="mt-2 hidden">
          <p class="text-sm text-gray-600">Your item will be beautifully wrapped in premium gift packaging.</p>
        </div>
      </div>
    </div>
    
    <div class="flex items-center gap-4 mb-4">
      <button id="addToCartBtn" class="gold-bg px-8 py-3 rounded-lg font-medium shadow hover:shadow-lg transition text-lg">ADD TO CART</button>
      <div class="flex items-center border border-[var(--gray)] rounded-lg overflow-hidden bg-white">
        <button id="qtyMinus" class="px-4 py-3 text-xl text-[var(--navy)] hover:bg-[var(--gray)] transition">-</button>
        <span id="qtyValue" class="px-6 py-3 text-xl text-[var(--navy)] bg-white">1</span>
        <button id="qtyPlus" class="px-4 py-3 text-xl text-[var(--navy)] hover:bg-[var(--gray)] transition">+</button>
      </div>
    </div>
    <div class="flex items-center justify-between text-base on-light mb-4">
      <button id="wishlistBtn" class="flex items-center gap-2 bg-transparent border-none p-0 focus:outline-none hover:opacity-80 transition-opacity">
        <span id="wishlistIcon" class="text-red-500">‚ô°</span>
        <span>ADD TO WISHLIST</span>
      </button>
      <span class="flex items-center gap-2 cursor-pointer" id="compareBtn"><span>&#9878;</span> ADD TO COMPARE</span>
      <span class="flex items-center gap-2 cursor-pointer" id="reviewsBtn"><span>&#128172;</span> CHECK REVIEWS</span>
    </div>
    <button id="buyNowBtn" class="w-full mt-2 py-4 rounded-xl gold-bg text-xl font-medium shadow hover:shadow-lg transition">BUY NOW</button>
  </div>
</div>
<!-- Checkout Modal -->
<div id="checkoutModal" class="fixed inset-0 bg-black bg-opacity-40 z-50 hidden flex items-center justify-center p-4">
  <div class="relative bg-[#fffdfa] rounded-3xl shadow-2xl max-w-4xl w-full mx-4 p-8 flex flex-col max-h-[90vh] overflow-y-auto" style="font-family: 'Didot', serif;">
    <button id="closeCheckoutModal" class="absolute top-6 right-6 text-2xl text-[var(--navy)] hover:text-[var(--gold)] focus:outline-none">&times;</button>
    <h2 class="text-3xl font-normal navy-text mb-6 text-center">Complete Your Purchase</h2>
    
    <div class="grid md:grid-cols-3 gap-8">
      <!-- Left Column: Delivery Details -->
      <div class="md:col-span-2">
        <div class="bg-[#f8f6f3] rounded-xl p-6 mb-6">
          <h3 class="text-xl font-medium navy-text mb-4 flex items-center">
            <span class="w-8 h-8 rounded-full bg-[var(--gold)] text-white flex items-center justify-center mr-2">1</span>
            Delivery Address
          </h3>
          <form id="deliveryForm" class="space-y-4">
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium navy-text mb-1">First Name*</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent">
              </div>
              <div>
                <label class="block text-sm font-medium navy-text mb-1">Last Name*</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent">
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium navy-text mb-1">Address*</label>
              <textarea required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent" rows="3"></textarea>
            </div>
            <div class="grid grid-cols-3 gap-4">
              <div class="col-span-2">
                <label class="block text-sm font-medium navy-text mb-1">City*</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent">
              </div>
              <div>
                <label class="block text-sm font-medium navy-text mb-1">Pincode*</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent">
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium navy-text mb-1">State*</label>
              <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent">
            </div>
            <div>
              <label class="block text-sm font-medium navy-text mb-1">Phone Number*</label>
              <input type="tel" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--gold)] focus:border-transparent">
            </div>
          </form>
        </div>

        <div class="bg-[#f8f6f3] rounded-xl p-6">
          <h3 class="text-xl font-medium navy-text mb-4 flex items-center">
            <span class="w-8 h-8 rounded-full bg-[var(--gold)] text-white flex items-center justify-center mr-2">2</span>
            Payment Method
          </h3>
          
          <div class="space-y-4">
            <div class="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-[var(--gold)] payment-method">
              <input type="radio" name="payment" id="upi" class="h-4 w-4 text-[var(--gold)] focus:ring-[var(--gold)]" checked>
              <label for="upi" class="ml-3 flex-1">
                <div class="flex items-center justify-between">
                  <span class="block text-sm font-medium navy-text">UPI</span>
                  <img src="https://cdn-icons-png.flaticon.com/512/825/825454.png" alt="UPI" class="h-6">
                </div>
                <p class="text-xs text-gray-500 mt-1">Google Pay, PhonePe, Paytm, etc.</p>
              </label>
            </div>

            <div class="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-[var(--gold)] payment-method">
              <input type="radio" name="payment" id="card" class="h-4 w-4 text-[var(--gold)] focus:ring-[var(--gold)]">
              <label for="card" class="ml-3 flex-1">
                <div class="flex items-center justify-between">
                  <span class="block text-sm font-medium navy-text">Credit/Debit Card</span>
                  <div class="flex space-x-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/196/196578.png" alt="Visa" class="h-4">
                    <img src="https://cdn-icons-png.flaticon.com/512/196/196566.png" alt="Mastercard" class="h-4">
                  </div>
                </div>
              </label>
            </div>

            <div class="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-[var(--gold)] payment-method">
              <input type="radio" name="payment" id="netbanking" class="h-4 w-4 text-[var(--gold)] focus:ring-[var(--gold)]">
              <label for="netbanking" class="ml-3 flex-1">
                <span class="block text-sm font-medium navy-text">Net Banking</span>
                <p class="text-xs text-gray-500 mt-1">All major banks supported</p>
              </label>
            </div>

            <div class="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-[var(--gold)] payment-method">
              <input type="radio" name="payment" id="cod" class="h-4 w-4 text-[var(--gold)] focus:ring-[var(--gold)]">
              <label for="cod" class="ml-3 flex-1">
                <div class="flex items-center justify-between">
                  <span class="block text-sm font-medium navy-text">Cash on Delivery</span>
                  <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">+‚Çπ50</span>
                </div>
                <p class="text-xs text-gray-500 mt-1">Pay when you receive your order</p>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column: Order Summary -->
      <div class="md:col-span-1">
        <div class="bg-[#f8f6f3] rounded-xl p-6 sticky top-4">
          <h3 class="text-xl font-medium navy-text mb-4">Order Summary</h3>
          
          <div class="space-y-4 mb-6">
            <div class="flex items-start">
              <img id="checkoutProductImage" src="https://cdn.shopify.com/s/files/1/0752/6435/9887/files/NecklaceSet1.jpg" alt="Product" class="w-20 h-20 object-cover rounded-lg mr-3">
              <div class="flex-1">
                <h4 id="checkoutProductName" class="font-medium navy-text">Gold Tone Circular Charm Necklace</h4>
                <p id="checkoutProductVariant" class="text-sm text-gray-600">with Pave stones</p>
                <div class="flex items-center justify-between mt-1">
                  <span class="text-sm">Qty: <span id="checkoutProductQty">1</span></span>
              <span>Shipping</span>
              <span>Free</span>
            </div>
            <div class="flex justify-between text-sm">
              <span>GST (18%)</span>
              <span id="gst">‚Çπ143.82</span>
            </div>
            <div id="codFee" class="hidden flex justify-between text-sm">
              <span>Cash on Delivery</span>
              <span>+‚Çπ50.00</span>
            </div>
            <div class="flex justify-between font-medium pt-2 border-t border-gray-200 mt-2">
              <span>Total</span>
              <span id="totalAmount">‚Çπ942.82</span>
            </div>
          </div>

          <button id="placeOrderBtn" class="w-full mt-6 py-3 bg-[var(--gold)] text-white font-medium rounded-lg hover:bg-opacity-90 transition">
            Place Order
          </button>
          
          <p class="text-xs text-center text-gray-500 mt-3">By placing this order, you agree to our <a href="#" class="text-[var(--gold)] hover:underline">Terms & Conditions</a></p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Success Modal -->
<div id="successModal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center">
  <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 text-center">
    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    <h3 class="text-2xl font-medium text-gray-900 mb-2">Order Placed Successfully!</h3>
    <p class="text-gray-600 mb-6">Your order #DISSARA-<span id="orderId"></span> has been placed and will be delivered soon.</p>
    <div class="bg-gray-50 p-4 rounded-lg mb-6">
      <p class="text-sm text-gray-600">A confirmation has been sent to <span id="userEmail">your email</span></p>
    </div>
    <button id="continueShoppingBtn" class="w-full py-3 bg-[var(--gold)] text-white font-medium rounded-lg hover:bg-opacity-90 transition">
      Continue Shopping
    </button>
  </div>
</div>

<!-- Reviews Modal -->
<div id="reviewsModal" class="fixed inset-0 bg-black bg-opacity-40 z-50 hidden flex items-center justify-center">
  <div class="relative bg-[#fffdfa] rounded-3xl shadow-2xl max-w-lg w-full mx-4 p-8 flex flex-col" style="font-family: 'Didot', serif;">
    <button id="closeReviewsModal" class="absolute top-4 right-4 text-2xl text-[var(--navy)] hover:text-[var(--gold)] focus:outline-none">&times;</button>
    <h3 class="text-2xl font-medium gold-text mb-4">Customer Reviews</h3>
    <div class="mb-4">
      <div class="mb-3 p-4 bg-[#f8f6f3] rounded-xl border-l-4 border-[var(--gold)]">
        <div class="font-medium navy-text mb-1">Aarushi S.</div>
        <div class="text-base navy-text mb-1">Absolutely stunning necklace! Looks even better in person. Packaging was beautiful too.</div>
        <div class="text-sm gold-text">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
      </div>
      <div class="mb-3 p-4 bg-[#f8f6f3] rounded-xl border-l-4 border-[var(--gold)]">
        <div class="font-medium navy-text mb-1">Megha T.</div>
        <div class="text-base navy-text mb-1">Loved the quality and shine. Perfect for gifting!</div>
        <div class="text-sm gold-text">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
      </div>
      <div class="mb-3 p-4 bg-[#f8f6f3] rounded-xl border-l-4 border-[var(--gold)]">
        <div class="font-medium navy-text mb-1">Simran K.</div>
        <div class="text-base navy-text mb-1">Fast delivery and the product is exactly as shown. Will buy again!</div>
        <div class="text-sm gold-text">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
<!-- Wishlist Modal -->
<div id="wishlistModal" class="fixed inset-0 bg-black bg-opacity-40 z-50 hidden flex items-center justify-center">
  <div class="relative bg-[#fffdfa] rounded-3xl shadow-2xl max-w-lg w-full mx-4 p-8 flex flex-col" style="font-family: 'Didot', serif;">
    <button id="closeWishlistModal" class="absolute top-4 right-4 text-2xl text-[var(--navy)] hover:text-[var(--gold)] focus:outline-none">&times;</button>
    <h3 class="text-2xl font-medium gold-text mb-4">Your Wishlist</h3>
    <ul id="wishlistItems" class="space-y-3">
      <!-- Wishlist items will be rendered here -->
    </ul>
    <p id="emptyWishlist" class="text-center text-gray-500 mt-2">Your wishlist is empty.</p>
  </div>
</div>

<!-- Compare Modal -->
<div id="compareModal" class="fixed inset-0 bg-black bg-opacity-40 z-50 hidden flex items-center justify-center">
  <div class="relative bg-[#fffdfa] rounded-3xl shadow-2xl max-w-lg w-full mx-4 p-8 flex flex-col" style="font-family: 'Didot', serif;">
    <button id="closeCompareModal" class="absolute top-4 right-4 text-2xl text-[var(--navy)] hover:text-[var(--gold)] focus:outline-none">&times;</button>
    <h3 class="text-2xl font-medium gold-text mb-4">Compare List</h3>
    <ul class="space-y-3">
      <li class="flex items-center justify-between bg-[#f8f6f3] rounded-xl p-4">
        <span class="navy-text">Gold Tone Circular Charm Necklace</span>
        <span class="text-xs gold-text">Rs.799.00</span>
      </li>
      <li class="flex items-center justify-between bg-[#f8f6f3] rounded-xl p-4">
        <span class="navy-text">Evil Eye Rose Gold Bracelet</span>
        <span class="text-xs gold-text">Rs.799.00</span>
      </li>
    </ul>
  </div>
</div>

      wishlistModal.classList.add('hidden');
      wishlistModal.classList.remove('flex');
    }
  });
}

// Compare modal (guarded to avoid early ReferenceError)
const compareModal = document.getElementById('compareModal');
const compareBtn = document.getElementById('compareBtn');
const closeCompareModal = document.getElementById('closeCompareModal');
if (compareBtn && compareModal) {
  compareBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    compareModal.classList.remove('hidden');
    compareModal.classList.add('flex');
  });
}
if (closeCompareModal && compareModal) {
  closeCompareModal.addEventListener('click', function() {
    compareModal.classList.add('hidden');
    compareModal.classList.remove('flex');
  });
}
if (compareModal) {
  compareModal.addEventListener('click', function(e) {
    if (e.target === compareModal) {
      compareModal.classList.add('hidden');
      compareModal.classList.remove('flex');
    }
  });
}

    <footer class="navy-bg py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <h4 class="didot text-2xl font-medium mb-4 gold-text">Dissara</h4>
                    <p class="text-gray-400 mb-4 max-w-md">
                        Creating timeless jewelry pieces that celebrate life's most precious moments.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-[var(--gold)] transition-colors">Facebook</a>
                        <a href="#" class="text-gray-400 hover:text-[var(--gold)] transition-colors">Instagram</a>
                        <a href="#" class="text-gray-400 hover:text-[var(--gold)] transition-colors">Pinterest</a>
                    </div>
                </div>
                <div>
                    <h5 class="font-medium mb-4 gold-text didot">Quick Links</h5>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">About Us</a></li>
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">Collections</a></li>
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">Custom Design</a></li>
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">Care Guide</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="font-medium mb-4 gold-text didot">Customer Care</h5>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">Contact Us</a></li>
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">Size Guide</a></li>
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">Returns</a></li>
                        <li><a href="#" class="hover:text-[var(--gold)] transition-colors">Warranty</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Dissara. All rights reserved.</p>
            </div>
        </div>
    </footer>
</body>
<script>
// üî• IMMEDIATE TEST - Log buttons on script start
console.log('‚ö° Script loaded! Checking for buttons...');
setTimeout(() => {
  const btns = document.querySelectorAll('.buy-now-btn');
  console.log('üîç Found ' + btns.length + ' .buy-now-btn elements');
  btns.forEach((btn, i) => {
    console.log('Button ' + (i+1) + ':', btn.textContent, btn.className);
    // Direct test click
    btn.addEventListener('click', (e) => {
      console.log('‚úÖ DIRECT LISTENER: Button ' + (i+1) + ' was clicked!');
    });
  });
}, 100);

// Current product used by modal / wishlist / cart
let currentProduct = null;

// Handle clicking on category Buy now buttons
function handleBuyNowClick(event) {
  event.preventDefault();
  event.stopPropagation();
  const card = this.closest('.product-card');
  if (!card) return;

  const imgEl = card.querySelector('img');
  const titleEl = card.querySelector('.didot');

  const payload = {
    id: titleEl ? titleEl.textContent.trim() : 'gift-item',
    name: titleEl ? titleEl.textContent.trim() : 'Gift Item',
    price: 799,
    image: imgEl ? imgEl.src : '',
    quantity: 1
  };
  try { localStorage.setItem('checkoutItem', JSON.stringify(payload)); } catch {}
  window.location.href = 'checkout-gift.html';
}

// Quantity, note and gift wrap controls inside modal
const qtyMinus = document.getElementById('qtyMinus');
const qtyPlus = document.getElementById('qtyPlus');

// Initialize wishlist count on page load
document.addEventListener('DOMContentLoaded', function() {
  updateWishlistCount();
  
  // Use event delegation with capture phase for buy-now buttons
  document.addEventListener('click', function(e) {
    const btn = e.target.closest('.buy-now-btn');
    if (!btn) return;
    
    console.log('üéØ Buy Now button clicked!');
    e.preventDefault();
    e.stopPropagation();
    
    // Get the closest product card
    const card = btn.closest('.product-card');
    if (!card) {
      console.error('‚ùå Could not find product card');
      return;
    }
    
    // Extract product info
    const imgEl = card.querySelector('img');
    const titleEl = card.querySelector('.didot');
    
    const payload = {
      id: titleEl ? titleEl.textContent.trim() : 'gift-item',
      name: titleEl ? titleEl.textContent.trim() : 'Gift Item',
      price: 799,
      image: imgEl ? imgEl.src : '',
      quantity: 1
    };
    console.log('üì¶ Product selected:', payload);
    try { localStorage.setItem('checkoutItem', JSON.stringify(payload)); } catch {}
    window.location.href = 'checkout-gift.html';
  }, true); // Use capture phase
});

// Compare modal
const compareModal = document.getElementById('compareModal');
const compareBtn = document.getElementById('compareBtn');
compareBtn.addEventListener('click', function(e) {
  e.stopPropagation();
  compareModal.classList.remove('hidden');
  compareModal.classList.add('flex');
});
const closeCompareModal = document.getElementById('closeCompareModal');
closeCompareModal.addEventListener('click', function() {
  compareModal.classList.add('hidden');
  compareModal.classList.remove('flex');
});
compareModal.addEventListener('click', function(e) {
  if (e.target === compareModal) {
    compareModal.classList.add('hidden');
    compareModal.classList.remove('flex');
  }
});

// Cart Dropdown Functions
function displayCart() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');
  
  if (cart.length === 0) {
    cartItems.innerHTML = `
      <div class="empty-cart">
        <div class="empty-cart-icon">üõí</div>
        <p>Your cart is empty</p>
        <p style="font-size: 0.9rem; margin-top: 8px;">Add some beautiful jewelry to get started!</p>
      </div>
    `;
    cartTotal.textContent = '‚Çπ0';
    return;
  }
  
  let total = 0;
  let cartHTML = '';
  
  cart.forEach((item, index) => {
    const itemTotal = item.price * (item.quantity || 1);
    total += itemTotal;
    
    cartHTML += `
      <div class="cart-item" data-index="${index}">
        <img src="${item.image}" alt="${item.name}" />
        <div class="cart-item-details">
          <div class="cart-item-name">${item.name}</div>
          <div class="cart-item-meta">
            Size: ${item.selectedSize || 'One Size'} | Color: ${item.selectedColor || 'Gold'} | Qty: ${item.quantity || 1}
          </div>
          <div class="cart-item-price">‚Çπ${itemTotal.toLocaleString('en-IN')}</div>
        </div>
        <div class="cart-item-remove" onclick="removeFromCart(${index})">√ó</div>
      </div>
    `;
  });
  
  cartItems.innerHTML = cartHTML;
  cartTotal.textContent = `‚Çπ${total.toLocaleString('en-IN')}`;
}

function removeFromCart(index) {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  cart.splice(index, 1);
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartCount();
  displayCart();
}

function toggleCartDropdown() {
  const cartDropdown = document.getElementById('cartDropdown');
  const cartButton = document.getElementById('cartButton');
  const isVisible = cartDropdown.style.display !== 'none';
  
  if (isVisible) {
    cartDropdown.style.display = 'none';
  } else {
    // Get cart button position
    const cartRect = cartButton.getBoundingClientRect();
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    // Position dropdown near the cart button
    cartDropdown.style.top = (cartRect.bottom + scrollTop + 10) + 'px';
    cartDropdown.style.right = (window.innerWidth - cartRect.right) + 'px';
    
    displayCart();
    cartDropdown.style.display = 'block';
  }
}

// Update cart count
function updateCartCount() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const cartCount = document.getElementById('cartCount');
  if (cartCount) {
    cartCount.textContent = cart.length;
    cartCount.style.display = cart.length > 0 ? 'flex' : 'none';
  }
}

// Cart event listeners
document.addEventListener('DOMContentLoaded', function() {
  // Cart button click
  const cartButton = document.getElementById('cartButton');
  if (cartButton) {
    cartButton.addEventListener('click', function(e) {
      e.stopPropagation();
      toggleCartDropdown();
    });
  }
  
  // Close cart button
  const closeCart = document.getElementById('closeCart');
  if (closeCart) {
    closeCart.addEventListener('click', function() {
      document.getElementById('cartDropdown').style.display = 'none';
    });
  }
  
  // Checkout button
  const checkoutBtn = document.getElementById('checkoutBtn');
  if (checkoutBtn) {
    checkoutBtn.addEventListener('click', function() {
      window.location.href = 'checkout.html';
    });
  }
  
  // Close cart when clicking outside
  document.addEventListener('click', function(e) {
    const cartDropdown = document.getElementById('cartDropdown');
    const cartButton = document.getElementById('cartButton');
    
    if (cartDropdown.style.display !== 'none' && 
        !cartDropdown.contains(e.target) && 
        !cartButton.contains(e.target)) {
      cartDropdown.style.display = 'none';
    }
  });
  
  // Update cart count on load
  updateCartCount();
  
  // Mobile menu toggle
  const mobileMenuToggle = document.getElementById('mobileMenuToggle');
  const navlinks = document.getElementById('navlinks');
  
  if (mobileMenuToggle && navlinks) {
    mobileMenuToggle.addEventListener('click', function(e) {
      e.stopPropagation();
      navlinks.classList.toggle('mobile-active');
    });
    
    // Close mobile menu when clicking outside
    document.addEventListener('click', function(e) {
      if (navlinks.classList.contains('mobile-active') && 
          !navlinks.contains(e.target) && 
          !mobileMenuToggle.contains(e.target)) {
        navlinks.classList.remove('mobile-active');
      }
    });
    
    // Close mobile menu when clicking on a link
    const navLinks = navlinks.querySelectorAll('a');
    navLinks.forEach(link => {
      link.addEventListener('click', function() {
        navlinks.classList.remove('mobile-active');
      });
    });
  }
});

</script>
</html>