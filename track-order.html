<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Track Order | Dissara</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Cormorant+Garamond:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="assets/css/luxury.css?v=2" />
  <style>
    body {
      background: #fff;
      color: #111827;
      font-family: 'Cormorant Garamond', serif;
      margin: 0;
      padding: 0;
    }
    .navbar {
      background: #fff;
      box-shadow: 0 2px 12px rgba(26,34,56,0.08);
      padding: 0.5rem 0;
    }
    .navbar-content {
      max-width: 1200px;
      margin: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .navbar-logo {
      font-family: 'Playfair Display', serif;
      font-weight: bold;
      font-size: 1.7rem;
      letter-spacing: 0.04em;
    }
    .navbar-links a {
      color: #111827;
      font-weight: 600;
      margin: 0 1rem;
      text-decoration: none;
      font-size: 1.1rem;
      transition: color 0.2s;
    }
    .navbar-links a:hover {
      color: #d4af37;
    }
    .track-order-container {
      max-width: 700px;
      margin: 2rem auto;
      background: #fafafa;
      border-radius: 1.2rem;
      box-shadow: 0 2px 12px rgba(26,34,56,0.08);
      padding: 2rem 2.5rem;
    }
    .order-title {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    .order-status-bar {
      width: 100%;
      height: 6px;
      background: #e5e7eb;
      border-radius: 3px;
      margin: 1rem 0;
      position: relative;
    }
    .order-status-progress {
      height: 100%;
      background: #111827;
      border-radius: 3px;
      width: 60%; /* Change as per status */
      position: absolute;
      left: 0;
      top: 0;
    }
    .order-section-title {
      font-weight: 700;
      margin-top: 2rem;
      margin-bottom: 0.7rem;
      font-size: 1.1rem;
    }
    .order-summary {
      background: #fff;
      border-radius: 1rem;
      box-shadow: 0 1px 6px rgba(26,34,56,0.05);
      padding: 1.2rem;
      margin-bottom: 1.5rem;
    }
    .order-summary-item {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    .order-summary-item img {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      margin-right: 1rem;
      background: #e5e7eb;
      object-fit: cover;
    }
    .order-summary-details {
      flex: 1;
    }
    .order-summary-details h4 {
      margin: 0;
      font-size: 1rem;
      font-weight: 600;
    }
    .order-summary-details p {
      margin: 0.2rem 0 0 0;
      font-size: 0.95rem;
      color: #444;
    }
    .order-total {
      font-weight: 700;
      font-size: 1.1rem;
      text-align: right;
      margin-top: 1rem;
    }
    .shipping-timeline {
      position: relative;
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 2rem;
      margin-top: 2rem;
      max-width: 100%;
    }
    .timeline-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      position: relative;
      min-width: 80px;
    }
    .timeline-step .dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #e5e7eb;
      border: 3px solid #e5e7eb;
      margin-bottom: 8px;
      transition: background 0.2s, border-color 0.2s;
    }
    .timeline-step.completed .dot {
      background: #111827;
      border-color: #111827; /* changed from #d4af37 to black */
    }
    .timeline-step.active .dot {
      background: #111827;    /* changed from #d4af37 to black */
      border-color: #111827;  /* changed from #d4af37 to black */
    }
    .timeline-step .label {
      font-weight: 600;
      font-size: 1rem;
      color: #111827;
      margin-bottom: 4px;
    }
    .timeline-step .date {
      font-size: 0.92rem;
      color: #444;
    }
    .timeline-bar {
      position: absolute;
      top: 8px;
      left: 9px;
      right: 9px;
      height: 4px;
      background: #e5e7eb;
      z-index: 0;
    }
    .timeline-step.completed ~ .timeline-bar,
    .timeline-step.active ~ .timeline-bar {
      background: #d4af37;
    }
  </style>
</head>
<body>
  <header class="floating-nav">
    <div class="brand">
      <a href="index.html" aria-label="Home">
        <img src="logo.png" alt="Dissara" class="logo" />
      </a>
    </div>
    <nav class="navlinks">
      <a href="index.html">Home</a>
      <a href="gift-store.html">Gift Store</a>
      <a href="collections.html">Collections</a>
      <a href="index.html#newarrivals">New Arrivals</a>
      <a href="index.html#shopby">Shop By</a>
      <a href="index.html#contact">Contact</a>
      <a href="index.html#about">About Us</a>
      <span id="authSlot"></span>
      <div class="nav-actions">
        <button id="wishlistIconButton" class="nav-icon-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" d="M12 21s-4.35-2.43-7.05-5.14C2.24 13.15 2 10.1 4.03 8.07a4.26 4.26 0 0 1 6.02.25L12 10.34l1.95-2.02a4.26 4.26 0 0 1 6.02-.25c2.03 2.03 1.79 5.08-.92 7.79C16.35 18.57 12 21 12 21z" />
          </svg>
          <span id="wishlistCount" class="nav-icon-badge" style="display:none;">0</span>
        </button>
        <button id="cartButton" class="nav-icon-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
          <span id="cartCount" class="nav-icon-badge" style="display:none;">0</span>
        </button>
      </div>
    </nav>
  </header>
  <!-- Track Order Section -->
  <div class="track-order-container" id="trackOrderContainer">
    <div class="order-title" id="orderTitle">Loading...</div>
    <div id="orderDate"></div>
    
    <!-- Shipping Timeline -->
    <div class="shipping-timeline" style="margin: 2rem 0;" id="shippingTimeline">
      <div class="timeline-step completed">
        <span class="dot"></span>
        <span class="label">Order Placed</span>
        <span class="date" id="placedDate"></span>
      </div>
      <div class="timeline-step completed">
        <span class="dot"></span>
        <span class="label">Shipped</span>
        <span class="date" id="shippedDate"></span>
      </div>
      <div class="timeline-step active">
        <span class="dot"></span>
        <span class="label">Out for Delivery</span>
        <span class="date" id="deliveryDate"></span>
      </div>
      <div class="timeline-step">
        <span class="dot"></span>
        <span class="label">Delivered</span>
        <span class="date" id="expectedDate"></span>
      </div>
      <div class="timeline-bar"></div>
    </div>
    
    <div id="estimatedDelivery"></div>
    <div class="order-section-title">Shipping Address</div>
    <div id="shippingAddress"></div>
    <div class="order-section-title">Billing Address</div>
    <div id="billingAddress"></div>
    <div class="order-section-title">Payment Method</div>
    <div id="paymentMethod"></div>
    <div class="order-section-title">Order Summary</div>
    <div class="order-summary" id="orderSummary">
      <!-- Order items will be populated here -->
    </div>
  </div>

  <script>
    function currency(n){ return 'â‚¹' + Number(n||0).toLocaleString('en-IN'); }
    
    // Get the most recent order from localStorage
    const orders = JSON.parse(localStorage.getItem('orders') || '[]');
    const latestOrder = orders.length > 0 ? orders[orders.length - 1] : null;
    
    if (latestOrder) {
      // Update order information
      document.getElementById('orderTitle').textContent = `Order #${latestOrder.id}`;
      document.getElementById('orderDate').textContent = `Ordered on ${new Date(latestOrder.when).toLocaleDateString()} at ${new Date(latestOrder.when).toLocaleTimeString()}`;
      
      // Update timeline dates based on order date
      const orderDate = new Date(latestOrder.when);
      document.getElementById('placedDate').textContent = orderDate.toLocaleDateString();
      document.getElementById('shippedDate').textContent = new Date(orderDate.getTime() + 24 * 60 * 60 * 1000).toLocaleDateString();
      document.getElementById('deliveryDate').textContent = new Date(orderDate.getTime() + 4 * 24 * 60 * 60 * 1000).toLocaleDateString();
      document.getElementById('expectedDate').textContent = `Expected: ${new Date(orderDate.getTime() + 5 * 24 * 60 * 60 * 1000).toLocaleDateString()}`;
      document.getElementById('estimatedDelivery').textContent = `Estimated delivery: ${new Date(orderDate.getTime() + 5 * 24 * 60 * 60 * 1000).toLocaleDateString()}`;
      
      // Reset all timeline steps to remove 'completed' and 'active' classes
      document.querySelectorAll('.timeline-step').forEach(step => {
        step.classList.remove('completed', 'active');
      });

      // Only mark 'Order Placed' as completed (black dot)
      document.querySelector('.timeline-step:nth-child(1)').classList.add('completed');
      
      // Update shipping address
      const shipTo = latestOrder.shipTo;
      const shippingAddr = `${shipTo.fn} ${shipTo.ln}<br>${shipTo.addr}<br>${shipTo.city}, ${shipTo.state} ${shipTo.pin}<br>${shipTo.country}`;
      document.getElementById('shippingAddress').innerHTML = shippingAddr;
      document.getElementById('billingAddress').innerHTML = shippingAddr; // Same as shipping for now
      
      // Update payment method
      const paymentMethod = latestOrder.pay === 'cod' ? 'Cash on Delivery' : 
                           latestOrder.pay === 'upi' ? 'UPI' : 
                           latestOrder.pay === 'card' ? 'Card' : 'Unknown';
      document.getElementById('paymentMethod').textContent = paymentMethod;
      
      // Update order summary
      const orderSummary = document.getElementById('orderSummary');
      const item = latestOrder.item;
      
      orderSummary.innerHTML = `
        <div class="order-summary-item">
          <img src="${item.image}" alt="${item.name}" onerror="this.src='https://via.placeholder.com/48'" />
          <div class="order-summary-details">
            <h4>${item.name}</h4>
            ${item.size ? `<p>Size: ${item.size}</p>` : ''}
            ${item.color ? `<p>Color: ${item.color}</p>` : ''}
            ${item.quantity && item.quantity > 1 ? `<p>Quantity: ${item.quantity}</p>` : ''}
          </div>
        </div>
        <div class="order-total">Total: ${currency(item.price * (item.quantity || 1))}</div>
      `;
    } else {
      // No orders found
      document.getElementById('trackOrderContainer').innerHTML = `
        <div style="text-align: center; padding: 3rem;">
          <h2>No Orders Found</h2>
          <p>You haven't placed any orders yet.</p>
          <a href="collections.html" style="display: inline-block; margin-top: 1rem; padding: 12px 24px; background: #111827; color: white; text-decoration: none; border-radius: 8px;">Start Shopping</a>
        </div>
      `;
    }
  </script>
</body>
</html>